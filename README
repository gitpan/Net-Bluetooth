INSTALL
TO INSTALL RUN:
                                                                                                                     
        perl Makefile.PL
        make
        make test
        make install
                                                                                                                     
                                                                                                                     
Once installed, run 'perldoc Net::Bluetooth' for more information.

If you have any problems or questions please email me at IGuthrie@aol.com
with "Net::Bluetooth" in the subject line. If you run into a build problem,
please include the output of the install commands, the version of Perl
you are using (perl -v), and what operating system you are using. Also
please make BlueZ is installed and working on your system.
                                                                                                                     
                                                                        

Module documentation:

NAME

Net::Bluetooth - Perl Bluetooth Interface

SYNOPSIS


  use Net::Bluetooth;

  #### list all remote devices in the area
  my $device_ref = get_remote_devices();
  foreach $addr (keys %$device_ref) {
	print "Address: $addr Name: $device_ref->{$addr}\n";
  }


  #### search for a specific service on a remote device
  my @sdp_array = sdp_search($addr, 0x1101, "");

  #### foreach service record
  foreach $rec_ref (@sdp_array) {
	#### Print all available information for service
	foreach $key (keys %$rec_ref) {
		print "Key: $key Value: $rec_ref->{$key}\n";
	}
  }


  #### Create a RFCOMM client 
  $obj = Net::Bluetooth->newsocket("RFCOMM");
  if($obj->connect($addr, $port) != 0) {
	print "connect error: $!\n";
	exit;
  }

  #### create a Perl filehandle for reading and writing
  *SERVER = $obj->perlfh();
  $amount = read(SERVER, $buf, 256);
  close(SERVER);


  #### register and unregister a service
  my $sdp_session = register_service("RFCOMM", 1, 0x1101, "GPS");
  if(!$sdp_session) {
	#### couldn't register service
  }
  unregister_service($sdp_session);


  #### create a RFCOMM server
  $obj = Net::Bluetooth->newsocket("RFCOMM");
  #### bind to port 1
  if($obj->bind(1) != 0) {
	print "bind error: $!\n";
	exit;
  }

  #### listen with a backlog of 2
  if($obj->listen(2) != 0) {
	print "listen error: $!\n";
	exit;
  }

  #### accept a client connection
  $new_obj = $obj->accept();
  if(!defined($new_obj)) {
	print "client accept failed: $!\n";
	exit;
  }

  #### get client information
  my ($caddr, $port) = $new_obj->getpeername();

  #### create a Perl filehandle for reading and writing
  *CLIENT = $new_obj->perlfh();
  print CLIENT "stuff";
  close(CLIENT);
  $obj->close();



DESCRIPTION

This module creates a Bluetooth interface for Perl.

Currently it only works with the Bluez libs, which can be 
obtained at www.bluez.org. Please make sure BlueZ is installed
and working properly before you try to use this module.
Depending on your system BlueZ maybe already installed or
you may have to build it yourself, and do some configuration.

You can verify BlueZ can detect devices and services with
the utilities that come with it (hciconfig, sdptool, hcitool, etc).

In the near future the interface will change to add several
more calls as well as Windows support.

FUNCTIONS

get_remote_devices()
    Searches for remote Bluetooth devices. The search will
    take approximately 10 seconds (This will be a configurable 
    value in the future.). When finished, it will return a hash
    reference that contains the device address and name. The
    address is the key and the name is the value.


sdp_search($addr, $uuid, $name)
sdp_search($addr, $uuid, "")
sdp_search($addr, 0, $name)
sdp_search($addr, 0, "")
    This searches a specific device for service records. The first
    argument is the device address which is not optional. The uuid
    argument can be a valid uuid or 0. The name argument can be a
    valid service name or "". It will return services that match
    the uuid or service name if supplied, otherwise it will return
    all public service records for the device.

    The return value is a list which contains a hash reference for
    each service record found. The key/values for the hash are as follows:
    SERVICE_NAME: Service Name
    SERVICE_DESC: Service Description
    SERVICE_PROV: Service Provider
    RFCOMM: RFCOMM Port
    L2CAP: L2CAP Port
    UNKNOWN: Unknown Protocol  Port
    If any of the values are unavailable, the keys will not exist.

    If $addr is "local" the call will use the local SDP server.


register_service("RFCOMM", 1, 0x1101, "GPS")
    This call registers a service with the local SDP server. The
    first argument is the protocol type which can either be "RFCOMM"
    or "L2CAP". The second argument is the port number. The third
    argument is the service uuid. The fourth argument is the service
    name.

    The return value is a handle to the service you have registered,
    which can be passed to unregister_service to unregister the service.
    The value will be 0 if there is a failure.

    If you also plan to create a server for this service, remember to 
    make sure you create a socket of the same type and bind to the same
    port.
    
unregister_service($service_handle)
   This unregisters your service with the local SDP server. The service 
   will be unregistered without this call when the application exits.
                                                                                                                     

OBJECTS

Currently this module provides a bluetooth socket object. This object
is used to create bluetooth sockets and interface with them. There
are two types of sockets supported, RFCOMM and L2CAP. The methods
are listed below.

newsocket("RFCOMM")
    This constructs a socket object for a RFCOMM socket or L2CAP
    socket.

connect($addr, $port)
    This calls the connect() system call with address and port you
    supply. You can use this to connect to a server. Returns 0 on
    success.

bind($port)
    This calls the bind() system call with the port you provide. 
    You can use this to bind to a port if you are creating a server.
    Returns 0 on success.

    As a side note, RFCOMM ports can only range from 1 - 30.

listen($backlog)
    This calls the listen() system call with the backlog you provide.
    Returns 0 on success.

accept()
    This calls the accept() system call and creates a new bluetooth
    socket object which is returned. On failure it will return undef.

perlfh()
    This call returns a Perl filehandle for a open socket. You can
    use the Perl filehandle as you would any other filehandle, except
    with Perl calls that use the socket address structure. This 
    provides a easy way to do socket IO instead of doing it through the
    socket object. Currently this is the only way to do socket IO,
    although soon I will provide read/write calls through the object
    interface.

close()
    This closes the socket object. This can also be done through the
    Perl close() call on a created Perl filehandle.

getpeername()
    This returns the address and name for a open bluetooth socket.


REQUIREMENTS
You need BlueZ installed and working.

AUTHOR

Ian Guthrie
IGuthrie@aol.com

Copyright (c) 2006 Ian Guthrie. All rights reserved.
               This program is free software; you can redistribute it and/or
               modify it under the same terms as Perl itself.

SEE ALSO

www.bluez.org
http://people.csail.mit.edu/albert/bluez-intro/index.html
O'Reilly's Linux Unwired

perl(1).

Copyright (c) 2006 Ian Guthrie. All rights reserved.
               This program is free software; you can redistribute it and/or
               modify it under the same terms as Perl itself.
